<template>
  <div class="panel-content">
    <div style="width: 100vw;height: 100vh;" ref="chartContentPie"></div>
  </div>
</template>

<script>
import axios from "axios";
import echarts from "echarts";

import geoJson from "./data.json";
export default {
  props: ["barColor", "progress", "city"],
  name: "TEMPLATE",
  data() {
    return {
      chartData: "71.23",
      chart: "",
    };
  },
  mounted() {
    this.showChart();

    // window.addEventListener("resize", (ev) => {
    //   this.$dt.start({
    //     type: "debounce",
    //     immediate: true,
    //     time: 100,
    //     success: () => {
    //       this.chart.resize();
    //     },
    //   });
    // });
  },
  methods: {
    showChart() {
      var name = "bj";

      this.chart = echarts.init(this.$refs.chartContentPie);

      // myChart.showLoading();
      // myChart.hideLoading();

      echarts.registerMap(name, geoJson);

      this.chart.setOption({
        backgroundColor: "#252b45",
        title: {
          left: "center",
          textStyle: {
            color: "#000",
          },
        },
        visualMap: {
          min: 0,
          max: 10,
          calculable: true,
          inRange: {
            color: ["#50a3ba", "#eac736", "#d94e5d"],
          },
          textStyle: {
            color: "#fff",
          },
        },
        geo: {
          map: "bj",
          label: {
            normal: {
              show: true,
              color: "#fff",
            },
            emphasis: {
              show: true,
            },
          },
          roam: false, //是否允许缩放
          layoutCenter: ["50%", "50%"], //地图位置
          layoutSize: "95%",
          itemStyle: {
            normal: {
              color: "#031525", //地图背景色
              borderColor: "rgba(100,149,237,1)", //省市边界线
            },
            emphasis: {
              color: "rgba(37, 43, 61, .5)", //悬浮背景
            },
          },
        },
        tooltip: {
          show: true,
          formatter: "{a}{b}{c}{d}",
        },
        series: [
          {
            type: "map",
            map: "bj",
            geoIndex: 0,
            aspectScale: 0.75, //长宽比
            showLegendSymbol: false, // 存在legend时显示
            label: {
              normal: {
                show: false,
              },
              emphasis: {
                show: false,
                textStyle: {
                  color: "#fff",
                },
              },
            },
            roam: true,
            itemStyle: {
              normal: {
                areaColor: "#031525",
                borderColor: "#3B5077",
              },
              emphasis: {
                areaColor: "#2B91B7",
              },
            },
            animation: false,
            data: [],
          },
          {
            name: "credit_pm2.5",
            type: "scatter",
            coordinateSystem: "geo",
              "data": [{
                    "value": [116.45163, 39.89503, 15]
                }, {
                    "value": [117.17231, 40.68434, 1]
                }, {
                    "value": [116.422, 39.93213, 2]
                }, {
                    "value": [116.43577, 39.93357, 1]
                }, {
                    "value": [116.43798, 39.93668, 1]
                }, {
                    "value": [116.43485, 39.93958, 1]
                }, {
                    "value": [116.45089, 39.93712, 2]
                }, {
                    "value": [116.44122, 39.94115, 1]
                }, {
                    "value": [116.44227, 39.94032, 1]
                }, {
                    "value": [116.43545, 39.93946, 1]
                }, {
                    "value": [116.44066, 39.93849, 1]
                }, {
                    "value": [116.44896, 39.89403, 1]
                }, {
                    "value": [116.41837, 39.91342, 2]
                }, {
                    "value": [116.44248, 39.93848, 1]
                }, {
                    "value": [116.44128, 39.93967, 1]
                }, {
                    "value": [116.43682, 39.93516, 1]
                }, {
                    "value": [116.44175, 39.94059, 1]
                }, {
                    "value": [116.37063, 39.92412, 8]
                }, {
                    "value": [116.4412, 39.93879, 1]
                }, {
                    "value": [116.34887, 39.94956, 1]
                }, {
                    "value": [116.48154, 39.90133, 1]
                }, {
                    "value": [116.3892, 39.85983, 1]
                }, {
                    "value": [116.34326, 39.94612, 3]
                }, {
                    "value": [116.37144, 39.92058, 1]
                }, {
                    "value": [116.36376, 39.9181, 1]
                }, {
                    "value": [116.37003, 39.91915, 1]
                }, {
                    "value": [116.37093, 39.91909, 1]
                }, {
                    "value": [116.48338, 39.89854, 1]
                }, {
                    "value": [116.39129, 39.939, 1]
                }, {
                    "value": [116.39094, 39.93923, 1]
                },
                //  {
                //     "value": [116.39161, 39.93946, 1]
                // }, {
                //     "value": [117.17304, 40.68602, 1]
                // }, {
                //     "value": [116.39265, 39.94632, 1]
                // }, {
                //     "value": [116.54955, 40.1044, 1]
                // }, {
                //     "value": [116.42345, 39.93994, 1]
                // }, {
                //     "value": [116.43792, 39.94012, 1]
                // }, {
                //     "value": [116.43539, 39.93795, 1]
                // }, {
                //     "value": [116.43564, 39.90366, 2]
                // }, {
                //     "value": [116.25927, 39.92637, 1]
                // }, {
                //     "value": [116.45479, 39.91731, 2]
                // }, {
                //     "value": [116.41932, 39.91901, 1]
                // }, {
                //     "value": [116.42247, 39.92155, 1]
                // }, {
                //     "value": [116.42047, 39.9208, 1]
                // }, {
                //     "value": [116.42236, 39.92088, 1]
                // }, {
                //     "value": [116.44387, 39.91924, 1]
                // }, {
                //     "value": [116.45172, 39.89485, 3]
                // }, {
                //     "value": [116.45131, 39.89504, 3]
                // }, {
                //     "value": [116.49936, 39.99381, 1]
                // }, {
                //     "value": [116.42054, 39.92062, 1]
                // }, {
                //     "value": [116.42229, 39.92051, 1]
                // }, {
                //     "value": [116.42078, 39.92104, 1]
                // }, {
                //     "value": [116.4987, 39.99212, 1]
                // }, {
                //     "value": [116.52235, 39.92575, 1]
                // }, {
                //     "value": [116.49684, 39.94829, 1]
                // }, {
                //     "value": [116.39264, 39.93793, 1]
                // }, {
                //     "value": [116.4836, 40.00121, 1]
                // }, {
                //     "value": [116.48291, 39.92164, 1]
                // }, {
                //     "value": [116.44044, 39.88122, 1]
                // }, {
                //     "value": [116.36991, 39.92553, 1]
                // },
                
                {
                    "value": [116.43438, 39.89326, 2]
                }, {
                    "value": [116.49724, 39.97983, 2]
                }, {
                    "value": [116.44528, 39.96749, 1]
                }, {
                    "value": [116.30165, 39.956, 1]
                }, {
                    "value": [116.42196, 39.9406, 1]
                }, {
                    "value": [116.43684, 39.93601, 1]
                }, {
                    "value": [116.60724, 39.89265, 1]
                }, {
                    "value": [116.50903, 39.98808, 1]
                }, {
                    "value": [116.57642, 39.90384, 1]
                }, {
                    "value": [116.40404, 39.92277, 3]
                }, {
                    "value": [116.33664, 39.97536, 1]
                }, {
                    "value": [116.33714, 39.97832, 1]
                }, {
                    "value": [116.33857, 39.98047, 1]
                }, {
                    "value": [116.33692, 39.97889, 1]
                }, {
                    "value": [116.43458, 39.93856, 0]
                }, {
                    "value": [116.33968, 39.97752, 1]
                }, {
                    "value": [116.42238, 39.92176, 2]
                }, {
                    "value": [116.45213, 39.89905, 1]
                }, {
                    "value": [116.45738, 39.93686, 1]
                }, {
                    "value": [116.51506, 39.93023, 2]
                }, {
                    "value": [116.30751, 39.89587, 3]
                }, {
                    "value": [116.4628, 39.91859, 1]
                }, {
                    "value": [116.44019, 39.94102, 1]
                }, {
                    "value": [116.44458, 39.94019, 1]
                }, {
                    "value": [116.44197, 39.94138, 1]
                }, {
                    "value": [116.41085, 39.94728, 3]
                }, {
                    "value": [116.53817, 40.37722, 2]
                }, {
                    "value": [116.4321, 40.02132, 1]
                }, {
                    "value": [116.48242, 39.97475, 3]
                }, {
                    "value": [116.56315, 40.09031, 3]
                }, {
                    "value": [116.5684, 40.07707, 1]
                }, {
                    "value": [116.45179, 39.89524, 3]
                }, {
                    "value": [116.45124, 39.89392, 3]
                }, {
                    "value": [116.54455, 40.47275, 3]
                }, {
                    "value": [116.34342, 40.00554, 1]
                }, {
                    "value": [116.44525, 39.93528, 1]
                }, {
                    "value": [116.31588, 39.99312, 1]
                }, {
                    "value": [116.4258, 40.07033, 1]
                }, {
                    "value": [116.73716, 40.08659, 4]
                }, {
                    "value": [116.46785, 39.95026, 1]
                }, {
                    "value": [116.46037, 39.92787, 1]
                }, {
                    "value": [116.46343, 39.93485, 2]
                }, {
                    "value": [116.45362, 39.95108, 2]
                }, {
                    "value": [116.55588, 39.82466, 1]
                }, {
                    "value": [116.4503, 39.89394, 3]
                }, {
                    "value": [116.56393, 39.98926, 1]
                }, {
                    "value": [116.42445, 39.98184, 2]
                }, {
                    "value": [116.30551, 39.95691, 1]
                }, {
                    "value": [116.37138, 39.87509, 3]
                }, {
                    "value": [116.5776, 39.91005, 1]
                }, {
                    "value": [116.44703, 40.44715, 3]
                }, {
                    "value": [116.29498, 40.04543, 1]
                }, {
                    "value": [116.58759, 39.92102, 3]
                }, {
                    "value": [116.456, 39.92316, 1]
                }, {
                    "value": [116.50636, 39.9234, 1]
                }, {
                    "value": [116.46043, 39.8853, 1]
                }, {
                    "value": [116.33791, 39.99006, 1]
                }, {
                    "value": [116.42502, 39.8628, 2]
                }, {
                    "value": [116.49344, 39.97616, 1]
                }, {
                    "value": [116.45269, 39.91657, 1]
                }, {
                    "value": [116.4552, 39.91994, 2]
                }, {
                    "value": [116.45609, 39.91812, 3]
                }, {
                    "value": [116.33888, 39.92082, 0]
                }, {
                    "value": [116.45574, 39.91844, 2]
                }, {
                    "value": [116.45329, 39.91678, 1]
                }, {
                    "value": [116.36103, 39.84902, 1]
                }, {
                    "value": [116.33543, 39.92223, 1]
                }, {
                    "value": [116.4528, 39.91637, 1]
                }, {
                    "value": [116.49851, 39.91096, 1]
                }, {
                    "value": [116.40949, 39.97382, 1]
                }, {
                    "value": [116.36148, 39.84212, 1]
                }, {
                    "value": [116.57145, 39.90804, 1]
                }, {
                    "value": [116.30019, 39.89086, 2]
                }, {
                    "value": [116.45598, 39.91897, 1]
                }, {
                    "value": [116.47487, 39.90881, 1]
                }, {
                    "value": [116.47317, 39.90858, 2]
                }, {
                    "value": [116.49296, 39.91383, 1]
                }, {
                    "value": [116.46738, 39.91567, 3]
                }, {
                    "value": [116.50248, 39.91986, 3]
                }, {
                    "value": [116.50235, 39.92034, 2]
                }, {
                    "value": [116.45555, 39.92008, 3]
                }, {
                    "value": [116.44302, 39.94143, 2]
                }, {
                    "value": [116.45731, 39.91942, 4]
                }, {
                    "value": [116.45996, 39.91698, 3]
                }, {
                    "value": [116.50445, 39.91894, 1]
                }, {
                    "value": [116.50404, 39.91881, 1]
                }, {
                    "value": [116.50293, 39.92004, 1]
                }, {
                    "value": [116.50427, 39.91967, 1]
                }, {
                    "value": [116.50211, 39.91854, 1]
                }, {
                    "value": [116.45636, 39.91878, 1]
                }, {
                    "value": [116.38085, 39.8612, 2]
                }, {
                    "value": [116.335, 40.05729, 1]
                }, {
                    "value": [116.45877, 39.91732, 2]
                }, {
                    "value": [116.45613, 39.93783, 1]
                }, {
                    "value": [116.39351, 39.95319, 2]
                }, {
                    "value": [116.48696, 39.93143, 3]
                }, {
                    "value": [116.37008, 39.91912, 1]
                }, {
                    "value": [116.37128, 39.91967, 1]
                }, {
                    "value": [116.37112, 39.91901, 1]
                }, {
                    "value": [116.44203, 40.44871, 2]
                }, {
                    "value": [116.37228, 39.92105, 1]
                }, {
                    "value": [116.57891, 39.90995, 1]
                }, {
                    "value": [116.57639, 39.91038, 1]
                }, {
                    "value": [116.32466, 39.96979, 1]
                }, {
                    "value": [116.46095, 39.94379, 1]
                }, {
                    "value": [116.46751, 39.94374, 1]
                }, {
                    "value": [116.35597, 39.84464, 1]
                }, {
                    "value": [116.3628, 39.84922, 1]
                }, {
                    "value": [116.44443, 39.95663, 1]
                }, {
                    "value": [116.33455, 40.07509, 3]
                }, {
                    "value": [116.45633, 39.92927, 1]
                }, {
                    "value": [116.51643, 39.92013, 1]
                }, {
                    "value": [116.3769, 39.92753, 1]
                }, {
                    "value": [116.4221, 39.92951, 1]
                }, {
                    "value": [116.44018, 39.95165, 1]
                }, {
                    "value": [116.38591, 39.93789, 2]
                }, {
                    "value": [116.37378, 40.00004, 2]
                }, {
                    "value": [116.43916, 39.89326, 1]
                }, {
                    "value": [116.39474, 39.94462, 1]
                }, {
                    "value": [116.39707, 39.94321, 1]
                }, {
                    "value": [116.30979, 39.89532, 3]
                }, {
                    "value": [116.37634, 39.92614, 1]
                }, {
                    "value": [116.42817, 39.91614, 1]
                }, {
                    "value": [116.4535, 39.91823, 0]
                }, {
                    "value": [116.31614, 40.00126, 1]
                }, {
                    "value": [116.55947, 39.75045, 2]
                }, {
                    "value": [116.43542, 39.93842, 0]
                }, {
                    "value": [116.3403, 39.88849, 1]
                }, {
                    "value": [116.46267, 40.00201, 1]
                }, {
                    "value": [116.36298, 39.97743, 1]
                }, {
                    "value": [116.59473, 40.03849, 1]
                }, {
                    "value": [116.38574, 39.93633, 2]
                }, {
                    "value": [116.72243, 40.20778, 6]
                }, {
                    "value": [116.48557, 39.98307, 1]
                }, {
                    "value": [116.3105, 39.95417, 1]
                }, {
                    "value": [116.39908, 39.94279, 1]
                }, {
                    "value": [116.55011, 40.15418, 1]
                }, {
                    "value": [116.47357, 39.98785, 1]
                }, {
                    "value": [116.46132, 39.88776, 1]
                }, {
                    "value": [116.45772, 39.92814, 0]
                }, {
                    "value": [116.4683, 39.88725, 1]
                }, {
                    "value": [116.37613, 39.92575, 1]
                }, {
                    "value": [116.3377, 40.02807, 2]
                }, {
                    "value": [116.63912, 40.28642, 1]
                }, {
                    "value": [116.40333, 39.9482, 1]
                }, {
                    "value": [116.453, 39.9183, 1]
                }, {
                    "value": [116.54324, 39.76242, 1]
                }, {
                    "value": [116.46264, 39.89575, 1]
                }, {
                    "value": [116.45274, 39.96165, 2]
                }, {
                    "value": [116.45277, 39.96032, 2]
                }, {
                    "value": [116.47443, 39.89958, 1]
                }, {
                    "value": [116.61552, 39.92765, 1]
                }, {
                    "value": [116.43682, 39.9383, 0]
                }, {
                    "value": [116.46641, 39.89556, 2]
                }, {
                    "value": [116.51828, 39.91898, 1]
                }, {
                    "value": [116.49331, 39.8997, 1]
                }
            ],
            label: {
              normal: {
                formatter: "{b}",
                position: "right",
                show: true,
              },
              emphasis: {
                show: true,
              },
            },
            itemStyle: {
              normal: {
                color: "#05C3F9",
              },
            },
          },
        ],
      });
    },
  },
  components: {},
};
</script>

<style scoped>
.panel-content {
  position: relative;
}
</style>
